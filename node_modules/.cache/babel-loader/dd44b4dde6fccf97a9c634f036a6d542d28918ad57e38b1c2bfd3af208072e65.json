{"ast":null,"code":"import autoResize from '../../../mixin/autoResize';\nimport { uuid } from '../../../util/index';\nimport { deepMerge } from '@jiaminghi/charts/lib/util/index';\nimport { deepClone } from '@jiaminghi/c-render/lib/plugin/util';\nimport { fade } from '@jiaminghi/color';\nexport default {\n  name: 'DvDecoration9',\n  mixins: [autoResize],\n  props: {\n    color: {\n      type: Array,\n      default: () => []\n    },\n    dur: {\n      type: Number,\n      default: 3\n    }\n  },\n  data() {\n    const id = uuid();\n    return {\n      ref: 'decoration-9',\n      polygonId: `decoration-9-polygon-${id}`,\n      svgWH: [100, 100],\n      svgScale: [1, 1],\n      defaultColor: ['rgba(3, 166, 224, 0.8)', 'rgba(3, 166, 224, 0.5)'],\n      mergedColor: []\n    };\n  },\n  watch: {\n    color() {\n      const {\n        mergeColor\n      } = this;\n      mergeColor();\n    }\n  },\n  methods: {\n    afterAutoResizeMixinInit() {\n      const {\n        calcScale\n      } = this;\n      calcScale();\n    },\n    calcScale() {\n      const {\n        width,\n        height,\n        svgWH\n      } = this;\n      const [w, h] = svgWH;\n      this.svgScale = [width / w, height / h];\n    },\n    onResize() {\n      const {\n        calcScale\n      } = this;\n      calcScale();\n    },\n    mergeColor() {\n      const {\n        color,\n        defaultColor\n      } = this;\n      this.mergedColor = deepMerge(deepClone(defaultColor, true), color || []);\n    },\n    fade\n  },\n  mounted() {\n    const {\n      mergeColor\n    } = this;\n    mergeColor();\n  }\n};","map":{"version":3,"mappings":"AAsFA;AACA;AAEA;AAEA;AAEA;AAEA;EACAA;EACAC;EACAC;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;EACA;EACAE;IACA;IACA;MACAC;MAEAC;MAEAC;MAEAC;MAEAC;MAEAC;IACA;EACA;EACAC;IACAX;MACA;QAAAY;MAAA;MAEAA;IACA;EACA;EACAC;IACAC;MACA;QAAAC;MAAA;MAEAA;IACA;IACAA;MACA;QAAAC;QAAAC;QAAAV;MAAA;MAEA;MAEA;IACA;IACAW;MACA;QAAAH;MAAA;MAEAA;IACA;IACAH;MACA;QAAAZ;QAAAS;MAAA;MAEA;IACA;IACAU;EACA;EACAC;IACA;MAAAR;IAAA;IAEAA;EACA;AACA","names":["name","mixins","props","color","type","default","dur","data","ref","polygonId","svgWH","svgScale","defaultColor","mergedColor","watch","mergeColor","methods","afterAutoResizeMixinInit","calcScale","width","height","onResize","fade","mounted"],"sourceRoot":"node_modules/@jiaminghi/data-view/lib/components/decoration9/src","sources":["main.vue"],"sourcesContent":["<template>\n  <div class=\"dv-decoration-9\" :ref=\"ref\">\n    <svg :width=\"`${svgWH[0]}px`\" :height=\"`${svgWH[1]}px`\" :style=\"`transform:scale(${svgScale[0]},${svgScale[1]});`\">\n      <defs>\n        <polygon :id=\"polygonId\" points=\"15, 46.5, 21, 47.5, 21, 52.5, 15, 53.5\" />\n      </defs>\n\n      <circle\n        cx=\"50\"\n        cy=\"50\"\n        r=\"45\"\n        fill=\"transparent\"\n        :stroke=\"mergedColor[1]\"\n        stroke-width=\"10\"\n        stroke-dasharray=\"80, 100, 30, 100\"\n      >\n        <animateTransform\n          attributeName=\"transform\"\n          type=\"rotate\"\n          values=\"0 50 50;360 50 50\"\n          :dur=\"`${dur}s`\"\n          repeatCount=\"indefinite\"\n        />\n      </circle>\n\n      <circle\n        cx=\"50\"\n        cy=\"50\"\n        r=\"45\"\n        fill=\"transparent\"\n        :stroke=\"mergedColor[0]\"\n        stroke-width=\"6\"\n        stroke-dasharray=\"50, 66, 100, 66\"\n      >\n        <animateTransform\n          attributeName=\"transform\"\n          type=\"rotate\"\n          values=\"0 50 50;-360 50 50\"\n          :dur=\"`${dur}s`\"\n          repeatCount=\"indefinite\"\n        />\n      </circle>\n\n      <circle\n        cx=\"50\"\n        cy=\"50\"\n        r=\"38\"\n        fill=\"transparent\"\n        :stroke=\"fade(mergedColor[1] || defaultColor[1], 30)\"\n        stroke-width=\"1\"\n        stroke-dasharray=\"5, 1\"\n      />\n\n      <use\n        v-for=\"(foo, i) in new Array(20).fill(0)\"\n        :key=\"i\"\n        :xlink:href=\"`#${polygonId}`\"\n        :stroke=\"mergedColor[1]\"\n        :fill=\"Math.random() > 0.4 ? 'transparent' : mergedColor[0]\"\n      >\n        <animateTransform\n          attributeName=\"transform\"\n          type=\"rotate\"\n          values=\"0 50 50;360 50 50\"\n          :dur=\"`${dur}s`\"\n          :begin=\"`${i * dur / 20}s`\"\n          repeatCount=\"indefinite\"\n        />\n      </use>\n\n      <circle\n        cx=\"50\"\n        cy=\"50\"\n        r=\"26\"\n        fill=\"transparent\"\n        :stroke=\"fade(mergedColor[1] || defaultColor[1], 30)\"\n        stroke-width=\"1\"\n        stroke-dasharray=\"5, 1\"\n      />\n    </svg>\n\n    <slot></slot>\n  </div>\n</template>\n\n<script>\nimport autoResize from '../../../mixin/autoResize'\nimport { uuid } from '../../../util/index'\n\nimport { deepMerge } from '@jiaminghi/charts/lib/util/index'\n\nimport { deepClone } from '@jiaminghi/c-render/lib/plugin/util'\n\nimport { fade } from '@jiaminghi/color'\n\nexport default {\n  name: 'DvDecoration9',\n  mixins: [autoResize],\n  props: {\n    color: {\n      type: Array,\n      default: () => ([])\n    },\n    dur: {\n      type: Number,\n      default: 3\n    }\n  },\n  data () {\n    const id = uuid()\n    return {\n      ref: 'decoration-9',\n\n      polygonId: `decoration-9-polygon-${id}`,\n\n      svgWH: [100, 100],\n\n      svgScale: [1, 1],\n\n      defaultColor: ['rgba(3, 166, 224, 0.8)', 'rgba(3, 166, 224, 0.5)'],\n\n      mergedColor: []\n    }\n  },\n  watch: {\n    color () {\n      const { mergeColor } = this\n\n      mergeColor()\n    }\n  },\n  methods: {\n    afterAutoResizeMixinInit () {\n      const { calcScale } = this\n\n      calcScale()\n    },\n    calcScale () {\n      const { width, height, svgWH } = this\n\n      const [w, h] = svgWH\n\n      this.svgScale = [width / w, height / h]\n    },\n    onResize () {\n      const { calcScale } = this\n\n      calcScale()\n    },\n    mergeColor () {\n      const { color, defaultColor } = this\n\n      this.mergedColor = deepMerge(deepClone(defaultColor, true), color || [])\n    },\n    fade\n  },\n  mounted () {\n    const { mergeColor } = this\n\n    mergeColor()\n  }\n}\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}